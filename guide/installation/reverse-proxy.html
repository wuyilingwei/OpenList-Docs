<!DOCTYPE html><html lang="en" data-beasties-container><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><link rel="icon" href="/favicon.svg"><script>!function(){const e=window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,t=localStorage.getItem("vueuse-color-scheme")||"auto";("dark"===t||e&&"light"!==t)&&document.documentElement.classList.toggle("dark",!0)}()</script><style type="text/css">:root{color-scheme:light dark;--va-c-bg:#fff}html{background-color:var(--va-c-bg)}</style><script>const locale=localStorage.getItem("valaxy-locale")||"en";document.documentElement.setAttribute("lang",locale)</script><script type="module" async crossorigin src="/OpenList-Docs/assets/app.xpe7HYl7.js"></script><link rel="modulepreload" crossorigin href="/OpenList-Docs/assets/framework.Bz32nx7L.js"><link rel="modulepreload" crossorigin href="/OpenList-Docs/assets/chunks/dayjs.BX5x0S-s.js"><link rel="modulepreload" crossorigin href="/OpenList-Docs/assets/chunks/nprogress.B1y48mDD.js"><link rel="modulepreload" crossorigin href="/OpenList-Docs/assets/chunks/vue-router.Dg3DEegA.js"><link rel="modulepreload" crossorigin href="/OpenList-Docs/assets/chunks/vue-i18n.D51u75hK.js"><link rel="modulepreload" crossorigin href="/OpenList-Docs/assets/chunks/pinia.Bgqu1Nyu.js"><link rel="stylesheet" crossorigin href="/OpenList-Docs/assets/app.BIKf7fDe.css"><link rel="stylesheet" crossorigin href="/OpenList-Docs/assets/group-icons.u5l6rBQ6.css"><link rel="modulepreload" crossorigin href="/OpenList-Docs/assets/reverse-proxy.CvzQNmde.js"><link rel="stylesheet" href="/OpenList-Docs/assets/group-icons.u5l6rBQ6.css"><link rel="modulepreload" crossorigin href="/OpenList-Docs/assets/ValaxyMain.go0rQDWS.js"><link rel="stylesheet" href="/OpenList-Docs/assets/ValaxyMain.Cny4s0wM.css"><title>Reverse proxy - OpenList Docs</title><script id="check-mac-os" async>document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><meta property="og:locale:alternate" content="zh-CN"><meta name="description" content="Documentation site for OpenList"><meta property="og:description" content="Documentation site for OpenList"><meta property="og:locale" content="en"><meta property="og:site_name" content="OpenList Docs"><meta property="og:title" content="Reverse proxy"><meta property="og:image" content="/favicon.svg"><meta property="og:type" content="website"><meta property="og:url" content="https://ILoveScratch2.github.io/"><link rel="icon" href="/favicon.svg" type="image/svg+xml"><meta name="generator" content="Valaxy 0.25.9"><meta name="twitter:card" content="summary_large_image"></head><body><div id="app" data-server-rendered="true"><!--[--><!--[--><!----><!--[--><!--]--><!----><!--]--><div class="layout antialiased" data-v-e8057d2d><nav w="full" class="press-nav relative md:fixed md:z-99 font-bold"><div class="pr-navbar flex justify-between items-center pl-4 pr-2 has-sidebar"><a href="/OpenList-Docs/" class="text-xl flex justify-center items-center font-black gradient-text from-teal-200 to-sky-400 bg-gradient-to-r" aria-label="$locale:siteConfig.title"><img class="logo" src="OpenList-Docs/logo.svg" alt="LOGO"><span class="inline-flex">OpenList Docs</span></a><div class="self-stretch flex justify-center items-center text-sm leading-5"><div class="VPNavBarSearch" p="x-2"><!----></div><div class="flex lt-md:hidden" h="full" p="x-2"><!--[--><!--[--><a href="/OpenList-Docs/guide" class="router-link-active press-nav-item-link flex justify-center items-center px-2" rel="noopener" data-v-32160185><!--[-->User Guide<!--]--></a><!--]--><!--[--><a href="/OpenList-Docs/configuration" class="press-nav-item-link flex justify-center items-center px-2" rel="noopener" data-v-32160185><!--[-->Configuration<!--]--></a><!--]--><!--[--><a href="/OpenList-Docs/faq" class="press-nav-item-link flex justify-center items-center px-2" rel="noopener" data-v-32160185><!--[-->FAQ<!--]--></a><!--]--><!--[--><a href="/OpenList-Docs/ecosystem" class="press-nav-item-link flex justify-center items-center px-2" rel="noopener" data-v-32160185><!--[-->Ecosystem<!--]--></a><!--]--><!--[--><div class="flex relative group px-2" h="full" aria-expanded="false" aria-haspopup="true" data-v-b7b2ac8b><button type="button" class="button flex items-center bg-transparent" h="full" data-v-b7b2ac8b><span class="text" data-v-b7b2ac8b>Community</span><div i-ri-arrow-drop-down-line data-v-b7b2ac8b></div></button><div class="menu grow" flex="~ col" items="start" data-v-b7b2ac8b><!--[--><!--[--><div class="menu-link w-full" data-v-b7b2ac8b data-v-8b5a856b><a class="menu-item" p="x-3" href="https://github.com/OpenListTeam/OpenList/discussions" target="_blank" data-v-8b5a856b><!--[-->Github Discussions<!--]--><!----></a></div><!--]--><!--[--><div class="menu-link w-full" data-v-b7b2ac8b data-v-8b5a856b><a class="menu-item" p="x-3" href="https://t.me/OpenListTeam" target="_blank" data-v-8b5a856b><!--[-->Telegram<!--]--><!----></a></div><!--]--><!--[--><div class="menu-link w-full" data-v-b7b2ac8b data-v-8b5a856b><a class="menu-item" p="x-3" href="https://t.me/OpenListOfficial" target="_blank" data-v-8b5a856b><!--[-->Telegram Channel<!--]--><!----></a></div><!--]--><!--]--></div></div><!--]--><!--[--><div class="flex relative group px-2" h="full" aria-expanded="false" aria-haspopup="true" data-v-b7b2ac8b><button type="button" class="button flex items-center bg-transparent" h="full" data-v-b7b2ac8b><span class="text" data-v-b7b2ac8b>v4.1.7</span><div i-ri-arrow-drop-down-line data-v-b7b2ac8b></div></button><div class="menu grow" flex="~ col" items="start" data-v-b7b2ac8b><!--[--><!--[--><div class="menu-link w-full" data-v-b7b2ac8b data-v-8b5a856b><a class="menu-item" p="x-3" href="https://github.com/OpenListTeam/OpenList/releases" target="_blank" data-v-8b5a856b><!--[-->Release Notes<!--]--><!----></a></div><!--]--><!--]--></div></div><!--]--><!--]--></div><div class="flex items-center lt-lg:hidden" p="x-2"><button title="Change languages"><div i-ri-translate class="rotate-y-180 transition transform"></div></button></div><div class="inline-flex items-center lt-lg:hidden" p="x-2"><button class="switch switch-appearance" type="button" aria-label="Toggle Dark Mode" data-v-a2d66f27><span class="check" data-v-a2d66f27><span class="icon-wrap" data-v-a2d66f27><div class="icon" i-ri-sun-line data-v-a2d66f27></div></span></span></button></div><div class="pr-social-links pr-nav-bar-social-links" p="x-2" data-v-c9cfc92a data-v-326fa6b8><!--[--><a class="pr-social-link" href="https://github.com/OpenListTeam/OpenList" target="_blank" rel="noopener" data-v-326fa6b8 data-v-23187a05><div class="i-ri-github-line" data-v-23187a05></div></a><!--]--></div><button type="button" class="pr-NavBarHamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="pr-NavScreen" data-v-ac56a236><span class="container" data-v-ac56a236><span class="top" data-v-ac56a236></span><span class="middle" data-v-ac56a236></span><span class="bottom" data-v-ac56a236></span></span></button></div></div><!----></nav><div class="press-local-nav" data-v-00f00fd6><button class="menu" aria-expanded="false" aria-controls="pr-sidebar-nav" data-v-00f00fd6><div i-ri-align-left class="menu-icon" data-v-00f00fd6></div><span class="menu-text" data-v-00f00fd6>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px" data-v-00f00fd6 data-v-2bc5b49f><button data-v-2bc5b49f>Return to top</button><!----></div></div><!--[--><aside class="press-sidebar shadow-lg"><div text="left" m="2"><!--[--><ul class="category-list"><!--[--><li p="t-2" w="full" border="t t-$pr-c-divider-light" class="press-sidebar-item category-list-item inline-flex items-center justify-between" text-14px tabindex="0"><span class="category-name" font="bold" m="l-1">User Guide <!-- <sup font="normal">[{{ category.total }}]</sup> --></span><button tabindex="0" role="button" aria-label="toggle section" class="caret folder-action inline-flex cursor-pointer" text-base><div i-ri-folder-reduce-line></div></button></li><ul><!--[--><li class="post-list-item"><!--[--><a href="/OpenList-Docs/guide" class="router-link-active inline-flex items-center"><span class="text ml-1" text="sm">Quick Start</span></a><!--]--></li><li class="post-list-item"><!--[--><a href="/OpenList-Docs/guide/migrate" class="inline-flex items-center"><span class="text ml-1" text="sm">Migrate from AList V3</span></a><!--]--></li><li class="post-list-item"><!--[--></li><li p="t-2" w="full" border="t t-$pr-c-divider-light" class="press-sidebar-item category-list-item inline-flex items-center justify-between" text-14px tabindex="0"><span class="category-name" font="bold" m="l-1">Storage Setup <!-- <sup font="normal">[{{ category.total }}]</sup> --></span><button tabindex="0" role="button" aria-label="toggle section" class="caret folder-action inline-flex cursor-pointer" text-base><div i-ri-folder-add-line></div></button></li><!----><!--]--><li class="post-list-item"><!--[--></li><li p="t-2" w="full" border="t t-$pr-c-divider-light" class="press-sidebar-item category-list-item inline-flex items-center justify-between" text-14px tabindex="0"><span class="category-name" font="bold" m="l-1">Advanced <!-- <sup font="normal">[{{ category.total }}]</sup> --></span><button tabindex="0" role="button" aria-label="toggle section" class="caret folder-action inline-flex cursor-pointer" text-base><div i-ri-folder-add-line></div></button></li><!----><!--]--><li class="post-list-item"><!--[--></li><li p="t-2" w="full" border="t t-$pr-c-divider-light" class="press-sidebar-item category-list-item inline-flex items-center justify-between" text-14px tabindex="0"><span class="category-name" font="bold" m="l-1">Installation <!-- <sup font="normal">[{{ category.total }}]</sup> --></span><button tabindex="0" role="button" aria-label="toggle section" class="caret folder-action inline-flex cursor-pointer" text-base><div i-ri-folder-add-line></div></button></li><!----><!--]--><!--]--></ul><!--]--></ul><ul class="category-list"><!--[--><li p="t-2" w="full" border="t t-$pr-c-divider-light" class="press-sidebar-item category-list-item inline-flex items-center justify-between" text-14px tabindex="0"><span class="category-name" font="bold" m="l-1">Configuration <!-- <sup font="normal">[{{ category.total }}]</sup> --></span><button tabindex="0" role="button" aria-label="toggle section" class="caret folder-action inline-flex cursor-pointer" text-base><div i-ri-folder-reduce-line></div></button></li><ul><!--[--><li class="post-list-item"><!--[--><a href="/OpenList-Docs/configuration/configuration" class="inline-flex items-center"><span class="text ml-1" text="sm">Configuration</span></a><!--]--></li><li class="post-list-item"><!--[--><a href="/OpenList-Docs/configuration/site" class="inline-flex items-center"><span class="text ml-1" text="sm">Site Configuration</span></a><!--]--></li><li class="post-list-item"><!--[--><a href="/OpenList-Docs/configuration/style" class="inline-flex items-center"><span class="text ml-1" text="sm">Style Configuration</span></a><!--]--></li><li class="post-list-item"><!--[--><a href="/OpenList-Docs/configuration/preview" class="inline-flex items-center"><span class="text ml-1" text="sm">Preview Configuration</span></a><!--]--></li><li class="post-list-item"><!--[--><a href="/OpenList-Docs/configuration/global" class="inline-flex items-center"><span class="text ml-1" text="sm">Global Configuration</span></a><!--]--></li><li class="post-list-item"><!--[--><a href="/OpenList-Docs/configuration/other" class="inline-flex items-center"><span class="text ml-1" text="sm">Other Configuration</span></a><!--]--></li><li class="post-list-item"><!--[--><a href="/OpenList-Docs/configuration/side" class="inline-flex items-center"><span class="text ml-1" text="sm">Side Configuration</span></a><!--]--></li><!--]--></ul><!--]--></ul><ul class="category-list"><!--[--><li p="t-2" w="full" border="t t-$pr-c-divider-light" class="press-sidebar-item category-list-item inline-flex items-center justify-between" text-14px tabindex="0"><span class="category-name" font="bold" m="l-1">FAQ <!-- <sup font="normal">[{{ category.total }}]</sup> --></span><button tabindex="0" role="button" aria-label="toggle section" class="caret folder-action inline-flex cursor-pointer" text-base><div i-ri-folder-reduce-line></div></button></li><ul><!--[--><li class="post-list-item"><!--[--><a href="/OpenList-Docs/faq/error" class="inline-flex items-center"><span class="text ml-1" text="sm">OpenList Error-Code</span></a><!--]--></li><li class="post-list-item"><!--[--><a href="/OpenList-Docs/faq/howto" class="inline-flex items-center"><span class="text ml-1" text="sm">How to</span></a><!--]--></li><li class="post-list-item"><!--[--><a href="/OpenList-Docs/faq/seealso" class="inline-flex items-center"><span class="text ml-1" text="sm">See also</span></a><!--]--></li><li class="post-list-item"><!--[--><a href="/OpenList-Docs/faq/why" class="inline-flex items-center"><span class="text ml-1" text="sm">Why</span></a><!--]--></li><!--]--></ul><!--]--></ul><ul class="category-list"><!--[--><li p="t-2" w="full" border="t t-$pr-c-divider-light" class="press-sidebar-item category-list-item inline-flex items-center justify-between" text-14px tabindex="0"><span class="category-name" font="bold" m="l-1">API Documentation <!-- <sup font="normal">[{{ category.total }}]</sup> --></span><button tabindex="0" role="button" aria-label="toggle section" class="caret folder-action inline-flex cursor-pointer" text-base><div i-ri-folder-reduce-line></div></button></li><ul><!--[--><li class="post-list-item"><!--[--><a href="/OpenList-Docs/api/apidocs" class="inline-flex items-center"><span class="text ml-1" text="sm">API Documentation</span></a><!--]--></li><!--]--></ul><!--]--></ul><ul class="category-list"><!----></ul><ul class="category-list"><!--[--><li p="t-2" w="full" border="t t-$pr-c-divider-light" class="press-sidebar-item category-list-item inline-flex items-center justify-between" text-14px tabindex="0"><span class="category-name" font="bold" m="l-1">Ecosystem <!-- <sup font="normal">[{{ category.total }}]</sup> --></span><button tabindex="0" role="button" aria-label="toggle section" class="caret folder-action inline-flex cursor-pointer" text-base><div i-ri-folder-reduce-line></div></button></li><ul><!--[--><li class="post-list-item"><!--[--><a href="/OpenList-Docs/ecosystem" class="inline-flex items-center"><span class="text ml-1" text="sm">OpenList Ecosystem</span></a><!--]--></li><li class="post-list-item"><!--[--></li><li p="t-2" w="full" border="t t-$pr-c-divider-light" class="press-sidebar-item category-list-item inline-flex items-center justify-between" text-14px tabindex="0"><span class="category-name" font="bold" m="l-1">Official Ecosystem <!-- <sup font="normal">[{{ category.total }}]</sup> --></span><button tabindex="0" role="button" aria-label="toggle section" class="caret folder-action inline-flex cursor-pointer" text-base><div i-ri-folder-reduce-line></div></button></li><ul><!--[--><li class="post-list-item"><!--[--><a href="/OpenList-Docs/ecosystem/official_docs" class="inline-flex items-center"><span class="text ml-1" text="sm">OpenList Docs</span></a><!--]--></li><li class="post-list-item"><!--[--><a href="/OpenList-Docs/ecosystem/official_desktop" class="inline-flex items-center"><span class="text ml-1" text="sm">OpenList Desktop</span></a><!--]--></li><li class="post-list-item"><!--[--><a href="/OpenList-Docs/ecosystem/official_mobile" class="inline-flex items-center"><span class="text ml-1" text="sm">OpenList Mobile</span></a><!--]--></li><li class="post-list-item"><!--[--><a href="/OpenList-Docs/ecosystem/official_APIpage" class="inline-flex items-center"><span class="text ml-1" text="sm">OpenList APIPages</span></a><!--]--></li><li class="post-list-item"><!--[--><a href="/OpenList-Docs/ecosystem/official_proxy" class="inline-flex items-center"><span class="text ml-1" text="sm">OpenList Proxy</span></a><!--]--></li><!--]--></ul><!--]--><!--]--></ul><!--]--></ul><!--]--></div></aside><!--]--><!----><!--[--><main class="press-main flex has-sidebar" data-v-e8057d2d data-v-b457700c><div w="full" flex="~" class="px-6 md:pl-12 has-aside relative" p="t-4" data-v-b457700c><div class="container" flex="~ grow" justify="between" data-v-b457700c><!--[--><div w="full" class="vp-doc content" flex="~ col grow" p="lt-md:0" data-v-b457700c><!--[--><!--]--><!--[--><!--]--><!--[--><!--[--><!--]--><article class="markdown-body mx-auto w-full max-w-4xl" data-v-b457700c><!--[--><h1 id="Reverse proxy" tabindex="-1" data-v-b457700c>Reverse proxy <a class="header-anchor" href="#Reverse proxy" aria-hidden="true" data-v-b457700c></a></h1><!--[--><div lang="en"><p>OpenList listens to port 5244 by default. If modified, please also update the port number in the configuration below.</p><p>If you are using <strong>reverse proxy</strong>, please ensure that the correct <code>Host</code> header is passed, as OpenList will generate the URL based on this information.</p><p>If the <code>Host</code> header is unavailable, you can use the higher-priority <code>X-Forwarded-Host</code> header (non-standard header). If the issue persists, configure the <a href="./../../configuration/configuration#site_url">site_url</a>.</p><p>If you want to use a <strong>sub folder</strong>, you should configure the <a href="./../../configuration/configuration#site_url">site_url</a>. Refer to <a href="./../../faq/howto#how-to-reverse-proxy-with-sub-directory">reverse proxy with sub folder</a>.</p><div class="warning custom-block"><p class="custom-block-title custom-block-title-default"><i class="icon i-carbon-warning-alt"></i>WARNING</p><p>If you need to proxy to a non-standard port, make sure to pass the <code>domain:port</code> information through the <code>Host</code> or <code>X-Forwarded-Host</code> header, otherwise the port will be lost in URLs!</p></div></div><div lang="zh-CN"><p>OpenList 默认监听 5244 端口。如有修改，请一并修改下列配置中的端口号。</p><p>如果您使用<strong>反向代理</strong>，请确保传递正确的 <code>Host</code> 、 <code>X-Forwarded-Proto</code> 头部信息，OpenList 将根据该信息生成 URL 地址。</p><p>如果 <code>Host</code> 头不可用，您可以使用优先级更高的 <code>X-Forwarded-Host</code>（非标准头部）。如果问题仍然存在，请通过配置 <a href="./../../configuration/configuration#site_url">site_url</a> 进行设置。</p><p>如果你想使用<strong>子目录</strong>，请通过配置 <a href="./../../configuration/configuration#site_url">site_url</a> 进行设置。参考 <a href="./../../faq/howto#如何对子目录进行反向代理">如何对子目录进行反向代理</a>。</p><div class="warning custom-block"><p class="custom-block-title custom-block-title-default"><i class="icon i-carbon-warning-alt"></i>WARNING</p><p>如果需要<strong>反向代理</strong>到<strong>非标准端口</strong>，请务必通过 <code>Host</code> 或 <code>X-Forwarded-Host</code> 标头传递实际访问的 <code>域名:端口</code> 信息，否则会导致获取到的链接丢失端口！</p></div></div><h2 id="nginx" tabindex="-1">nginx <a class="header-anchor" href="#nginx" aria-label="Permalink to &quot;nginx&quot;">​</a></h2><p><a href="https://nginx.org/en/docs/http/ngx_http_proxy_module.html" target="_blank" rel="noreferrer">https://nginx.org/en/docs/http/ngx_http_proxy_module.html</a></p><div lang="en"><p>Add in the <code>server</code> field of the website configuration file:</p></div><div lang="zh-CN"><p>在网站配置文件的 <code>server</code> 字段中添加：</p></div><div class="language-nginx"><button title="Copy code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">location</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0"> / </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">X-Forwarded-Proto $scheme;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Host $http_host;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">X-Real-IP $remote_addr;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Range $http_range;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">If-Range $http_if_range;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  proxy_redirect </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">off</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  proxy_pass </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">http://127.0.0.1:5244;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  proxy_http_version </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">1.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">  # the max size of file to upload</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">  client_max_body_size </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">20000m</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">}</span></span></code></pre><button class="collapse"></button></div><div lang="en"><div class="warning custom-block"><p class="custom-block-title custom-block-title-default"><i class="icon i-carbon-warning-alt"></i>WARNING</p><p>If you use the aaPanel, be sure to delete the following default configuration:</p><div class="language-nginx"><button title="Copy code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">location</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ^/(\.user.ini|\.htaccess|\.git|\.svn|\.project|LICENSE|README.md</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">location</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> .\*\.(gif|jpg|jpeg|png|bmp|swf)$</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">location</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> .\*\.(js|css)?$</span></span></code></pre><button class="collapse"></button></div><p>Disable Nginx caching in <code>/www/server/nginx/conf/proxy.conf</code> or the corresponding website configuration file. Otherwise, with the default configuration, when accessing large files, Nginx will attempt to cache the remote file locally first, resulting in playback failures.</p><div class="language-nginx"><button title="Copy code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">proxy_cache </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">cache_one; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># Remove this line</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">proxy_max_temp_file_size </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># Add this line</span></span></code></pre><button class="collapse"></button></div></div></div><div lang="zh-CN"><div class="warning custom-block"><p class="custom-block-title custom-block-title-default"><i class="icon i-carbon-warning-alt"></i>WARNING</p><p>如果使用宝塔面板，请务必删除以下默认配置：</p><div class="language-nginx"><button title="Copy code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">location</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> ^/(\.user.ini|\.htaccess|\.git|\.svn|\.project|LICENSE|README.md</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">location</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> .\*\.(gif|jpg|jpeg|png|bmp|swf)$</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">location</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583"> ~</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> .\*\.(js|css)?$</span></span></code></pre><button class="collapse"></button></div><p>并在<code>/www/server/nginx/conf/proxy.conf</code>中或对应网站配置文件中设置禁用 nginx 缓存，否则默认配置下访问较大文件时 nginx 会先尝试将远程文件缓存至本机，导致播放失败</p><div class="language-nginx"><button title="Copy code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">proxy_cache </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">cache_one; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D"># 删除这一行</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">proxy_max_temp_file_size </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF">0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">; </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D">#加上这一行</span></span></code></pre><button class="collapse"></button></div></div></div><div lang="en"><p>::: note Nginx Host Variables Differences</p><table><thead><tr><th>Variable</th><th>Description</th><th>Includes Port</th><th>Notes</th></tr></thead><tbody><tr><td><code>$http_host</code></td><td>The original <code>Host</code> request header</td><td>Yes</td><td>If the <code>Host</code> request header is missing, the value will be empty; not recommended for best practices</td></tr><tr><td><code>$host</code></td><td>Server name from the <code>Host</code> request header field</td><td>No</td><td>Defaults to the server’s <code>server_name</code> if <code>Host</code> field is missing</td></tr><tr><td><code>$host:$server_port</code></td><td>Server name + port</td><td>Yes</td><td>Use this combination when you need to use a non-default port (other than 80 or 443)</td></tr></tbody></table></div><div lang="zh-CN"><div class="tip custom-block"><p class="custom-block-title"><i class="icon i-carbon-thumbs-up"></i>Nginx 主机变量区别</p><table><thead><tr><th>变量</th><th>内容</th><th>是否包含端口号</th><th>备注</th></tr></thead><tbody><tr><td><code>$http_host</code></td><td>原始的 <code>Host</code> 请求标头</td><td>是</td><td>如果 <code>Host</code> 请求标头缺失，值为空，不符合最佳实践</td></tr><tr><td><code>$host</code></td><td><code>Host</code> 请求标头字段中的服务器名称</td><td>否</td><td>在没有 <code>Host</code> 字段时，默认使用服务器的 <code>server_name</code></td></tr><tr><td><code>$host:$server_port</code></td><td>服务器名称 + 端口</td><td>是</td><td>当需要使用非默认 80、443 端口时，请修改为这个组合</td></tr></tbody></table></div></div><div lang="en"><p>If HTTP/3 is needed, the corresponding <code>Host</code> line should be modified to:</p><div class="language-nginx"><button title="Copy code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Host $host:$server_port;</span></span></code></pre><button class="collapse"></button></div><p>This modified configuration will be compatible with requests using HTTP/2 or lower versions.</p></div><div lang="zh-CN"><p>如果需要使用 HTTP/3，需要将对应 <code>Host</code> 行修改为：</p><div class="language-nginx"><button title="Copy code" class="copy"></button><span class="lang">nginx</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583">proxy_set_header </span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">Host $host:$server_port;</span></span></code></pre><button class="collapse"></button></div><p>这样修改后的配置同时也可以兼容 HTTP/2 及更低版本的请求。</p></div><h2 id="apache" tabindex="-1">Apache <a class="header-anchor" href="#apache" aria-label="Permalink to &quot;Apache&quot;">​</a></h2><div lang="en"><p>Add the anti-generation configuration item <code>ProxyPass</code> under the <code>VirtualHost</code> field, such as:</p><div class="language-xml"><button title="Copy code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">VirtualHost</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> *:80&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ServerName myapp.example.com</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ServerAdmin webmaster@example.com</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    DocumentRoot /www/myapp/public</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    AllowEncodedSlashes NoDecode</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ProxyPreserveHost On</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ProxyPass "/" "http://127.0.0.1:5244/" nocanon</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ProxyPassReverse "/" "http://127.0.0.1:5244/" nocanon</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">VirtualHost</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre><button class="collapse"></button></div></div><div lang="zh-CN"><p>在 <code>VirtualHost</code> 字段下添加配置项 <code>ProxyPass</code>，如：</p><div class="language-xml"><button title="Copy code" class="copy"></button><span class="lang">xml</span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">VirtualHost</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8"> *:80&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ServerName myapp.example.com</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ServerAdmin webmaster@example.com</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    DocumentRoot /www/myapp/public</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    AllowEncodedSlashes NoDecode</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ProxyPreserveHost On</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ProxyPass "/" "http://127.0.0.1:5244/" nocanon</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">    ProxyPassReverse "/" "http://127.0.0.1:5244/" nocanon</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&lt;/</span><span style="--shiki-light:#22863A;--shiki-dark:#85E89D">VirtualHost</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8">&gt;</span></span></code></pre><button class="collapse"></button></div></div><h2 id="caddy" tabindex="-1">Caddy <a class="header-anchor" href="#caddy" aria-label="Permalink to &quot;Caddy&quot;">​</a></h2><div lang="en"><p>Add the reverse proxy configuration item <code>reverse_proxy</code> under the <code>Caddyfile</code> file, for example:</p></div><div lang="zh-CN"><p>在 <code>Caddyfile</code> 文件下添加 <code>reverse_proxy</code> 反向代理配置项，如：</p></div><div class="language-"><button title="Copy code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span>:80 {</span></span>
<span class="line"><span>  reverse_proxy 127.0.0.1:5244</span></span>
<span class="line"><span>}</span></span></code></pre><button class="collapse"></button></div><div lang="en"><p>If deployed on a server that is functioning properly on port 443 and accessed using a domain name, it is recommended to use this configuration to let Caddy automatically request a certificate:</p><p>（Replace example.com with your own resolved domain name）</p></div><div lang="zh-CN"><p>如果部署在 443 端口正常使用的服务器上且使用域名进行访问，建议使用这种配置让 Caddy 自动申请证书：</p><p>（将 <code>example.com</code> 替换为你自己解析后的域名）</p></div><div class="language-"><button title="Copy code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code"><code v-pre><span class="line"><span>example.com {</span></span>
<span class="line"><span>  reverse_proxy 127.0.0.1:5244</span></span>
<span class="line"><span>}</span></span></code></pre><button class="collapse"></button></div><h2 lang="en" id="tutorial-setting-up-reverse-proxy-in-aapanel" tabindex="-1">Tutorial: Setting up Reverse Proxy in aaPanel <a class="header-anchor" href="#tutorial-setting-up-reverse-proxy-in-aapanel" aria-label="Permalink to &quot;Tutorial: Setting up Reverse Proxy in aaPanel { lang=&quot;en&quot; }&quot;">​</a></h2><h2 lang="zh-CN" id="教程-宝塔面板设置反向代理" tabindex="-1">教程：宝塔面板设置反向代理 <a class="header-anchor" href="#教程-宝塔面板设置反向代理" aria-label="Permalink to &quot;教程：宝塔面板设置反向代理 { lang=&quot;zh-CN&quot; }&quot;">​</a></h2><div lang="en"><ol><li>Login to the aaPanel and add a new website.</li></ol><p>::</p><div lang="zh-CN"><ol><li>登录宝塔面板，添加站点；</li></ol></div></div><figure><img src="/OpenList-Docs/img/guide/reverse_proxy/bt_new_website.png" alt="bt_new_website" loading="lazy" decoding="async"></figure><div lang="en"><ol start="2"><li>Modify the website settings.</li></ol></div><div lang="zh-CN"><ol start="2"><li>修改站点设置；</li></ol></div><figure><img src="/OpenList-Docs/img/guide/reverse_proxy/bt_new_website_01.png" alt="bt_new_website_01" loading="lazy" decoding="async"></figure><div lang="en"><ol start="3"><li>Remove the default panel code.</li></ol></div><div lang="zh-CN"><ol start="3"><li>删除面板默认代码；</li></ol></div><p><img src="/OpenList-Docs/img/guide/reverse_proxy/bt_delete_default_config_01.png" alt="bt_delete_default_config_01"><img src="/OpenList-Docs/img/guide/reverse_proxy/bt_delete_default_config_02.png" alt="bt_delete_default_config_02"></p><div lang="en"><ol start="4"><li>Add the reverse proxy.</li></ol></div><div lang="zh-CN"><ol start="4"><li>添加反向代理；</li></ol></div><figure><img src="/OpenList-Docs/img/guide/reverse_proxy/bt_reverse_proxy.png" alt="bt_reverse_proxy" loading="lazy" decoding="async"></figure><div lang="en"><blockquote><p>If you need to apply for an <code>SSL certificate</code>, you can first apply for the certificate in the <code>SSL</code> option, and then set up the reverse proxy. Alternatively, you can set up the reverse proxy first, disable the proxy function, apply for an <code>SSL</code> certificate, and then enable the proxy again.</p></blockquote></div><div lang="zh-CN"><figure><img src="/OpenList-Docs/img/guide/reverse_proxy/bt_reverse_proxy.png" alt="bt_reverse_proxy" loading="lazy" decoding="async"></figure><blockquote><p>如需申请<code>SSL</code>证书，可先在<code>SSL</code>选项中申请证书，然后在设置反向代理。或者设置反向代理之后，关闭反向代理功能，申请<code>SSL</code>证书后再次开启代理。</p></blockquote></div><!--]--><!--[--><!--[--><div class="prose mx-auto w-full max-w-4xl" data-v-e8057d2d><h2 data-v-e8057d2d><span data-v-e8057d2d>Contributors</span></h2><ul class="va-git-log-contributor" flex="~ wrap gap-2" pt-2 data-v-e8057d2d data-v-eaebaeab><!--[--><!--]--></ul><div class="comments-container" data-v-e8057d2d><!----></div></div><!--]--><!--]--><!--]--><!----><!----></article><!--[--><!--]--><div flex justify="between" text="sm" class="pb-8 max-w-4xl" w="full" m="auto" data-v-b457700c><a flex items="center" class="decoration-none!" href="https://github.com/OpenListTeam/OpenList-Docs/edit/main/pages/guide/installation/reverse-proxy.md" target="_blank"><div i-ri-external-link-line></div><span ml-1>Edit this page on GitHub</span></a><p class="press-lastUpdated text-right" data-v-92db0407>Last updated: <time datetime="2025-07-26T05:20:07.000Z" data-v-92db0407></time></p></div><!--]--></div><!--[--><!--]--><!--[--><!--]--><!--[--><!--]--><!--[--><!--]--><!--[--><!--]--><!--]--><!--[--><!--[--><button class="toc-btn shadow-lg fixed press-icon-btn z-99 lt-md:hidden! xl:hidden!" right="5" bottom="24"><div i-ri-file-list-line></div></button><!----><aside flex="~ col grow" p="l-0 xl:l-8" text="center" z="$" class="press-aside lt-xl:fixed shadow xl:shadow-none xl:hover:shadow-none hover:shadow-lg"><div class="aside-curtain"></div><div class="aside-container lt-xl:fixed" flex="~ col"><div class="aside-content overflow-auto" flex="~ col"><div style="display:none" data-v-b3b664e2><div class="content" data-v-b3b664e2><div class="outline-title" data-v-b3b664e2>On this page</div><div class="outline-marker" data-v-b3b664e2></div><nav aria-labelledby="doc-outline-aria-label" data-v-b3b664e2><span id="doc-outline-aria-label" class="visually-hidden" data-v-b3b664e2>Table of Contents for current page</span><ul class="root va-toc css-i18n-toc va-toc relative z-1 css-i18n-toc" data-v-b3b664e2 data-v-e1d3fac6><!--[--><!--]--></ul></nav></div></div><div class="flex-grow"></div><!----></div></div></aside><!--]--><!--]--></div></div></main><button style="display:none" class="back-to-top-btn" aria-label="Back to Top" title="Back to Top" data-v-e8057d2d data-v-ef99e711><div class="i-ri-arrow-up-line" data-v-ef99e711></div></button><!--]--><footer class="press-footer has-sidebar" data-v-3467cded><div flex="~ col" class="container" data-v-3467cded><p class="message" data-v-3467cded>Built at 2025/11/23 13:55:18</p><p class="copyright" data-v-3467cded>AGPL-3.0 Licensed | © 2022-2025 <a href="https://github.com/OpenListTeam" target="_blank">The OpenList Projects Contributors</a></p></div></footer></div><!--]--></div><script>window.__INITIAL_STATE__='{"pinia":{"app":{"showLoading":true},"routerStore":{},"press-app":{}}}'</script><script type="application/ld+json" data-hid="schema-org-graph">{"@context":"https://schema.org","@graph":[{"@id":"https://ILoveScratch2.github.io/#identity","@type":"Person","name":"OpenList Team","url":"https://ILoveScratch2.github.io/","image":{"@id":"https://ILoveScratch2.github.io/#/schema/image/4047d1a"},"sameAs":[]},{"@id":"https://ILoveScratch2.github.io/#website","@type":"WebSite","dateModified":"2025-11-23T13:55:04.156Z","datePublished":"2025-11-23T13:55:04.156Z","inLanguage":"en","name":"Reverse proxy","url":"https://ILoveScratch2.github.io/","publisher":{"@id":"https://ILoveScratch2.github.io/#identity"}},{"@id":"https://ILoveScratch2.github.io/#webpage","@type":"WebPage","description":"Documentation site for OpenList","name":"Reverse proxy","url":"https://ILoveScratch2.github.io/","about":{"@id":"https://ILoveScratch2.github.io/#identity"},"isPartOf":{"@id":"https://ILoveScratch2.github.io/#website"},"potentialAction":[{"@type":"ReadAction","target":["https://ILoveScratch2.github.io/"]}]},{"@id":"https://ILoveScratch2.github.io/#/schema/image/4047d1a","@type":"ImageObject","contentUrl":"https://ILoveScratch2.github.io/logo.svg","inLanguage":"en","url":"https://ILoveScratch2.github.io/logo.svg"}]}</script></body></html>